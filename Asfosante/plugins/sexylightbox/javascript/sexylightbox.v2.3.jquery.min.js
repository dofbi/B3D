jQuery.bind=function(b,c){var a=Array.prototype.slice.call(arguments,2);return function(){var d=[this].concat(a,$.makeArray(arguments));return c.apply(b,d)}};(function(a){SexyLightbox={exists:Boolean=false,getOptions:function(){return{name:"SLB",zIndex:32000,color:"black",find:"sexylightbox",dir:"sexyimages",emergefrom:"top",background:"bgSexy.png",backgroundIE:"bgSexy.gif",buttons:"buttons.png",displayed:0,showDuration:200,closeDuration:400,moveDuration:1000,moveEffect:"easeInOutBack",resizeDuration:1000,resizeEffect:"easeInOutBack",shake:{distance:10,duration:100,transition:"easeInOutBack",loops:2},BoxStyles:{width:486,height:320},Skin:{white:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:0.6},black:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:0.6},blanco:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:0.6},negro:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:0.6}}}},overlay:{create:function(b){this.options=b;this.element=a('<div id="'+new Date().getTime()+'"></div>');this.element.css(a.extend({},{position:"absolute",top:0,left:0,opacity:0,display:"none","z-index":this.options.zIndex},this.options.style));this.element.bind("click",a.bind(this,function(d,c){if(this.options.hideOnClick){if(this.options.callback){this.options.callback()}else{this.hide()}}c.preventDefault()}));this.hidden=true;this.inject()},inject:function(){this.target=a(document.body);this.target.append(this.element);if(a.browser.msie&&a.browser.version=="6.0"){var c=parseInt(this.element.css("zIndex"));if(!c){c=1;var b=this.element.css("position");if(b=="static"||!b){this.element.css({position:"relative"})}this.element.css({zIndex:c})}c=(!!(this.options.zIndex||this.options.zIndex===0)&&c>this.options.zIndex)?this.options.zIndex:c-1;if(c<0){c=1}this.shim=a('<iframe id="IF_'+new Date().getTime()+'" scrolling="no" frameborder=0 src=""></div>');this.shim.css({zIndex:c,position:"absolute",top:0,left:0,border:"none",opacity:0});this.shim.insertAfter(this.element)}},resize:function(b,e){this.element.css({height:0,width:0});if(this.shim){this.shim.css({height:0,width:0})}var d={x:a(document).width(),y:a(document).height()};var c=a.browser.safari?(d.x-25<document.body.clientWidth?document.body.clientWidth:d.x):d.x;this.element.css({width:b?b:c,height:e?e:d.y});if(this.shim){this.shim.css({height:0,width:0});this.shim.css({width:b?b:c,height:e?e:d.y})}return this},show:function(){if(!this.hidden){return this}if(this.transition){this.transition.stop()}this.target.bind("resize",a.bind(this,this.resize));this.resize();if(this.shim){this.shim.css({display:"block"})}this.hidden=false;this.transition=this.element.fadeIn(this.options.showDuration,a.bind(this,function(){this.element.trigger("show")}));return this},hide:function(){if(this.hidden){return this}if(this.transition){this.transition.stop()}this.target.unbind("resize");if(this.shim){this.shim.css({display:"none"})}this.hidden=true;this.transition=this.element.fadeOut(this.options.closeDuration,a.bind(this,function(){this.element.trigger("hide");this.element.css({height:0,width:0})}));return this}},backwardcompatibility:function(b){this.options.dir=b.imagesdir||b.path||b.folder||b.dir;this.options.OverlayStyles=a.extend(this.options.Skin[this.rootColor],this.options.OverlayStyles||{})},preloadimage:function(b){img=new Image();img.src=b},initialize:function(d){this.options=a.extend(this.getOptions(),d);this.rootColor=this.options.color.substr(0,this.options.color.length-3);this.exists=true;this.backwardcompatibility(this.options);var b=this.options.dir+"/"+this.options.color+"/"+((((window.XMLHttpRequest==undefined)&&(ActiveXObject!=undefined)))?this.options.backgroundIE:this.options.background);var c=this.options.name;this.preloadimage(b);this.preloadimage(this.options.dir+"/"+this.options.color+"/"+this.options.buttons);this.overlay.create({style:this.options.Skin[this.rootColor],hideOnClick:true,zIndex:this.options.zIndex-1,callback:a.bind(this,this.close),showDuration:this.options.showDuration,showEffect:this.options.showEffect,closeDuration:this.options.closeDuration,closeEffect:this.options.closeEffect});this.lightbox={};a("body").append('<div id="'+c+'-Wrapper"><div id="'+c+'-Background"></div><div id="'+c+'-Contenedor"><div id="'+c+'-Top" style="background-image: url('+b+')"><a id="'+c+'-CloseButton" href="#">&nbsp;</a><div id="'+c+'-TopLeft" style="background-image: url('+b+')"></div></div><div id="'+c+'-Contenido"></div><div id="'+c+'-Bottom" style="background-image: url('+b+')"><div id="'+c+'-BottomRight" style="background-image: url('+b+')"><div id="'+c+'-Navegador"><strong id="'+c+'-Caption"></strong></div></div></div></div></div>');this.Wrapper=a("#"+c+"-Wrapper");this.Background=a("#"+c+"-Background");this.Contenedor=a("#"+c+"-Contenedor");this.Top=a("#"+c+"-Top");this.CloseButton=a("#"+c+"-CloseButton");this.Contenido=a("#"+c+"-Contenido");this.bb=a("#"+c+"-Bottom");this.innerbb=a("#"+c+"-BottomRight");this.Nav=a("#"+c+"-Navegador");this.Descripcion=a("#"+c+"-Caption");this.Wrapper.css({"z-index":this.options.zIndex,display:"none"}).hide();this.Background.css({"z-index":this.options.zIndex+1});this.Contenedor.css({position:"absolute",width:this.options.BoxStyles.width,"z-index":this.options.zIndex+2});this.Contenido.css({height:this.options.BoxStyles.height,"border-left-color":this.options.Skin[this.rootColor].hexcolor,"border-right-color":this.options.Skin[this.rootColor].hexcolor});this.CloseButton.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.Nav.css({color:this.options.Skin[this.rootColor].captionColor});this.Descripcion.css({color:this.options.Skin[this.rootColor].captionColor});this.CloseButton.bind("click",a.bind(this,function(){this.close();return false}));a(document).bind("keydown",a.bind(this,function(f,e){if(this.options.displayed==1){if(e.keyCode==27){this.close()}if(e.keyCode==37){if(this.prev){this.prev.trigger("click",e)}}if(e.keyCode==39){if(this.next){this.next.trigger("click",e)}}}}));a(window).bind("resize",a.bind(this,function(){if(this.options.displayed==1){this.replaceBox();this.overlay.resize()}}));a(window).bind("scroll",a.bind(this,function(){if(this.options.displayed==1){this.replaceBox()}}));this.refresh()},hook:function(b){b=a(b);b.blur();this.show((b.attr("title")||b.attr("name")||""),b.attr("href"),(b.attr("rel")||false))},close:function(){this.animate(0)},refresh:function(){var b=this;this.anchors=[];a("a, area").each(function(){if(a(this).attr("rel")&&new RegExp("^"+b.options.find).test(a(this).attr("rel"))){a(this).click(function(c){c.preventDefault();b.hook(this)});if(!(a(this).attr("id")==b.options.name+"-Left"||a(this).attr("id")==b.options.name+"-Right")){b.anchors.push(this)}}})},animate:function(b){if(this.options.displayed==0&&b!=0||b==1){this.overlay.show();this.options.displayed=1;this.Wrapper.css({display:"block"})}else{this.Wrapper.css({display:"none",top:-(this.options.BoxStyles.height+280)}).hide();this.overlay.hide();this.overlay.element.bind("hide",a.bind(this,function(){if(this.options.displayed){if(this.Image){this.Image.remove()}this.options.displayed=0}}))}},replaceBox:function(g){var e={x:a(window).width(),y:a(window).height()};var d={x:a(window).scrollLeft(),y:a(window).scrollTop()};var f=this.options.BoxStyles.width;var c=this.options.BoxStyles.height;if(this.options.displayed==0){var b=0;var h=0;h=d.x+((e.x-f)/2);if(this.options.emergefrom=="bottom"){b=(d.y+e.y+80)}else{b=(d.y-c)-80}this.Wrapper.css({display:"none",top:b,left:h});this.Contenedor.css({width:f});this.Contenido.css({height:c-80})}g=a.extend({},{width:this.lightbox.width,height:this.lightbox.height,resize:0},g);if(this.MoveBox){this.MoveBox.stop()}this.MoveBox=this.Wrapper.animate({left:(d.x+((e.x-g.width)/2)),top:(d.y+(e.y-(g.height+(this.navigator?80:48)))/2)},{duration:this.options.moveDuration,easing:this.options.moveEffect});if(g.resize){if(this.ResizeBox2){this.ResizeBox2.stop()}this.ResizeBox2=this.Contenido.animate({height:g.height},{duration:this.options.resizeDuration,easing:this.options.resizeEffect});if(this.ResizeBox){this.ResizeBox.stop()}this.ResizeBox=this.Contenedor.animate({width:g.width},{duration:this.options.resizeDuration,easing:this.options.resizeEffect,complete:function(){a(this).trigger("complete")}})}},getInfo:function(b,c){b=a(b);IEuta=a('<a id="'+this.options.name+"-"+c+'" title="'+b.attr("title")+'" rel="'+b.attr("rel")+'">&nbsp;</a>');IEuta.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});IEuta.attr("href",b.attr("href"));return IEuta},display:function(b,d,c){return this.show(d,b,"",c)},show:function(l,c,m,e){this.showLoading();var f=c.match(/(.+)?/)[1]||c;var i=/\.(jpe?g|png|gif|bmp)/gi;var b=c.match(/\?(.+)/);if(b){b=b[1]}var h=this.parseQuery(b);if(this.ResizeBox){this.ResizeBox.unbind("complete")}h=a.extend({},{width:0,height:0,modal:0,background:"",title:l},h||{});h.width=parseInt(h.width);h.height=parseInt(h.height);h.modal=parseInt(h.modal);this.overlay.options.hideOnClick=!h.modal;this.lightbox=a.extend({},h,{width:h.width+14});this.navigator=this.lightbox.title?true:false;if(e=="image"||f.match(i)){this.img=new Image();this.img.onload=a.bind(this,function(){this.img.onload=function(){};if(!h.width){var n=this.calculate(this.img.width,this.img.height);h.width=n.x;h.height=n.y;this.lightbox.width=h.width+14}this.lightbox.height=h.height-(this.navigator?21:35);this.replaceBox({resize:1});this.ResizeBox.bind("complete",a.bind(this,function(){this.showImage(this.img.src,h)}))});this.img.onerror=a.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404.png",this.options.find)});this.img.src=c}else{this.lightbox.height=h.height+(a.browser.opera?2:0);this.replaceBox({resize:1});if(c.indexOf("TB_inline")!=-1){this.ResizeBox.bind("complete",a.bind(this,function(){this.showContent(a("#"+h.inlineId).html(),this.lightbox)}))}else{if(c.indexOf("TB_iframe")!=-1){var j=c.split("TB_");this.ResizeBox.bind("complete",a.bind(this,function(){this.showIframe(j[0],this.lightbox)}))}else{this.ResizeBox.bind("complete",a.bind(this,function(){a.ajax({url:c,type:"GET",cache:false,error:a.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404html.png",this.options.find)}),success:a.bind(this,this.handlerFunc)})}))}}}this.next=false;this.prev=false;if(m.length>this.options.find.length){this.navigator=true;var d=false;var g=false;var k=this;a.each(this.anchors,function(n){if(a(this).attr("rel")==m&&!g){if(a(this).attr("href")==c){d=true}else{if(d){k.next=k.getInfo(this,"Right");g=true}else{k.prev=k.getInfo(this,"Left")}}}})}this.addButtons();this.showNavBar(l);this.animate(1)},calculate:function(b,e){var d=a(window).width()-100;var c=a(window).height()-100;if(b>d){e=e*(d/b);b=d;if(e>c){b=b*(c/e);e=c}}else{if(e>c){b=b*(c/e);e=c;if(b>d){e=e*(d/b);b=d}}}return{x:parseInt(b),y:parseInt(e)}},handlerFunc:function(c,b){this.showContent(b,this.lightbox)},addButtons:function(){if(this.prev){this.prev.bind("click",a.bind(this,function(c,b){b.preventDefault();this.hook(this.prev)}))}if(this.next){this.next.bind("click",a.bind(this,function(c,b){b.preventDefault();this.hook(this.next)}))}},showNavBar:function(){if(this.navigator){this.bb.addClass("SLB-bbnav");this.Nav.empty();this.innerbb.empty();this.innerbb.append(this.Nav);this.Descripcion.html(this.lightbox.title);this.Nav.append(this.prev);this.Nav.append(this.next);this.Nav.append(this.Descripcion)}else{this.bb.removeClass("SLB-bbnav");this.innerbb.empty()}},showImage:function(c,b){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"}).append('<img id="'+this.options.name+'-Image"/>');this.Image=a("#"+this.options.name+"-Image");this.Image.attr("src",c).css({width:b.width,height:b.height});this.Contenedor.css({background:"none"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"})},showContent:function(c,b){this.Background.empty().css({width:b.width-14,height:b.height+35,"background-color":b.background||"#ffffff"});this.Contenido.empty().css({width:b.width-14,"background-color":b.background||"#ffffff"}).append('<div id="'+this.options.name+'-Image"/>');this.Image=a("#"+this.options.name+"-Image");this.Image.css({width:b.width-14,height:b.height,overflow:"auto",background:b.height||"#ffffff"}).append(c);this.Contenedor.css({background:"none"})},showIframe:function(d,c,b){this.Background.empty().css({width:c.width-14,height:c.height+35,"background-color":c.background||"#ffffff"});var e="if_"+new Date().getTime()+"-Image";this.Contenido.empty().css({width:c.width-14,"background-color":c.background||"#ffffff",padding:"0px"}).append('<iframe id="'+e+'" frameborder="0"></iframe>');this.Image=a("#"+e);this.Image.css({width:c.width-14,height:c.height,background:c.background||"#ffffff"}).attr("src",d);this.Contenedor.css({background:"none"})},showLoading:function(){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.Contenedor.css({background:"url("+this.options.imagesdir+"/"+this.options.color+"/loading.gif) no-repeat 50% 50%"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.replaceBox(a.extend(this.options.BoxStyles,{resize:1}))},parseQuery:function(d){if(!d){return{}}var f={};var c=d.split(/[;&]/);for(var b=0;b<c.length;b++){var e=c[b].split("=");if(!e||e.length!=2){continue}f[unescape(e[0])]=unescape(e[1]).replace(/\+/g," ")}return f},shake:function(){var c=this.options.shake.distance;var b=this.Wrapper.position();b=b.left;for(x=0;x<this.options.shake.loops;x++){this.Wrapper.animate({left:b+c},this.options.shake.duration,this.options.shake.transition).animate({left:b-c},this.options.shake.duration,this.options.shake.transition)}this.Wrapper.animate({left:b+c},this.options.shake.duration,this.options.shake.transition).animate({left:b},this.options.shake.duration,this.options.shake.transition)}}})(jQuery);